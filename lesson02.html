<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ö‡∏ó‡∏ó‡∏µ‡πà 2: ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏≠‡∏á‡πÄ‡∏ã‡∏ï</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@200;300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
    --primary-color: #4f46e5;
    --secondary-color: #06b6d4;
    --success-color: #10b981;
    --warning-color: #f59e0b;
    --error-color: #ef4444;
    --bg-light: #f8fafc;
    --bg-white: #ffffff;
    --text-primary: #1e293b;
    --text-secondary: #64748b;
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
}

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Kanit', sans-serif;
            background: linear-gradient(135deg, var(--bg-light) 0%, #e2e8f0 100%);
            min-height: 100vh;
            color: var(--text-primary);
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            background: var(--bg-white);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-lg);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            width: 25%;
            transition: width 0.3s ease;
        }

        .lesson-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .xp-display {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.2rem;
            color: var(--primary-color);
            font-weight: 600;
        }

        .theory-card {
            background: var(--bg-white);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-md);
        }

        .theory-card h3 {
            color: var(--primary-color);
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .theory-content {
            line-height: 1.8;
            color: var(--text-primary);
        }

        .example-box {
            background: #f1f5f9;
            border-left: 4px solid var(--primary-color);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 10px 10px 0;
        }

        .game-container {
            background: var(--bg-white);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-md);
        }

        .game-title {
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 1rem;
            text-align: center;
        }

        .cards-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .flip-card {
            background-color: transparent;
            width: 100%;
            height: 200px;
            perspective: 1000px;
            cursor: pointer;
        }

        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .flip-card.flipped .flip-card-inner {
            transform: rotateY(180deg);
        }

        .flip-card-front, .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            padding: 1rem;
            box-shadow: var(--shadow-sm);
        }

        .flip-card-front {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
        }

        .flip-card-back {
            background: linear-gradient(135deg, var(--success-color), #45a049);
            color: white;
            transform: rotateY(180deg);
        }

        .card-question {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .card-icon {
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .card-answer {
            font-size: 1rem;
            line-height: 1.5;
            text-align: center;
        }

        .score-display {
            text-align: center;
            font-size: 1.3rem;
            color: var(--primary-color);
            margin: 2rem 0;
            font-weight: 600;
        }

        .buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Kanit', sans-serif;
        }

        .btn-primary {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #f5f5f5;
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }

        .result-message {
            text-align: center;
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: 600;
            display: none;
        }

        .result-message.success {
            background: #d1fae5;
            color: var(--success-color);
            border: 2px solid var(--success-color);
        }

        .result-message.error {
            background: #fee2e2;
            color: var(--error-color);
            border: 2px solid var(--error-color);
        }

        /* Pulse animation for cards */
        .flip-card.correct {
            animation: pulse-green 0.6s ease-in-out;
        }

        .flip-card.incorrect {
            animation: pulse-red 0.6s ease-in-out;
        }

        @keyframes pulse-green {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); box-shadow: 0 0 20px rgba(16, 185, 129, 0.5); }
            100% { transform: scale(1); }
        }

        @keyframes pulse-red {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); box-shadow: 0 0 20px rgba(239, 68, 68, 0.5); }
            100% { transform: scale(1); }
        }

        /* Confetti Animation */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: var(--primary-color);
            animation: confetti-fall 3s linear infinite;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .lesson-title {
                font-size: 2rem;
            }

            .buttons {
                flex-direction: column;
            }

            .cards-container {
                grid-template-columns: 1fr;
            }
        }

        /* ‡πÄ‡∏û‡∏¥‡πà‡∏° shake effect CSS */
        .flip-card.shake .flip-card-inner {
            animation: shake 0.4s;
        }
        @keyframes shake {
            0% { transform: translateX(0); }
            20% { transform: translateX(-10px); }
            40% { transform: translateX(10px); }
            60% { transform: translateX(-10px); }
            80% { transform: translateX(10px); }
            100% { transform: translateX(0); }
        }
        .card-choices {
            margin-top: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        .card-choices button {
            background: #f1f5f9;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            padding: 0.5rem 1rem;
            font-size: 1rem;
            font-family: 'Kanit', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s, color 0.2s;
        }
        .card-choices button:hover {
            background: var(--primary-color);
            color: #fff;
        }
        .card-choices-grid {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 1fr 1fr;
    gap: 10px;
    pointer-events: none;
    z-index: 2;
    padding: 18px;
    box-sizing: border-box;
}
.card-choices-grid button {
    width: 100%;
    height: 100%;
    min-width: 0;
    min-height: 0;
    border-radius: 18px;
    border: 2px solid var(--primary-color);
    background: #f1f5f9;
    color: var(--primary-color);
    font-size: 1.1rem;
    font-family: 'Kanit', sans-serif;
    font-weight: 600;
    cursor: pointer;
    opacity: 0;
    pointer-events: auto;
    transition: background 0.2s, color 0.2s, opacity 0.2s;
    box-shadow: 0 2px 8px rgba(79,70,229,0.08);
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 0.5rem;
}
.card-choices-grid button:hover {
    background: var(--primary-color);
    color: #fff;
}
.flip-card-front:hover .card-choices-grid button,
.flip-card-front:focus-within .card-choices-grid button {
    opacity: 1;
}
.flip-card.incorrect .flip-card-front {
    border: 3px solid var(--error-color);
    box-shadow: 0 0 0 4px #fee2e2;
}
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <h1 class="lesson-title">üìö ‡∏ö‡∏ó‡∏ó‡∏µ‡πà 2: ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏≠‡∏á‡πÄ‡∏ã‡∏ï</h1>
            <div class="xp-display">
    <span id="xp-display">XP: 0</span>
</div>
        </div>

        <div class="theory-card">
            <h3>üìñ ‡∏ó‡∏§‡∏©‡∏é‡∏µ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏≠‡∏á‡πÄ‡∏ã‡∏ï</h3>
            <div class="theory-content">
                <p>‡πÄ‡∏ã‡∏ï‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏ö‡πà‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å:</p>
                
                <div class="example-box">
                    <strong>1. ‡πÄ‡∏ã‡∏ï‡∏ß‡πà‡∏≤‡∏á (Empty Set)</strong><br>
                    ‚Ä¢ ‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå: ‚àÖ ‡∏´‡∏£‡∏∑‡∏≠ { }<br>
                    ‚Ä¢ ‡πÄ‡∏ã‡∏ï‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÄ‡∏•‡∏¢<br>
                    ‚Ä¢ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡πÄ‡∏ã‡∏ï‡∏Ç‡∏≠‡∏á‡∏°‡∏±‡∏á‡∏Å‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏à‡∏£‡∏¥‡∏á = ‚àÖ
                </div>

                <div class="example-box">
                    <strong>2. ‡πÄ‡∏ã‡∏ï‡∏à‡∏≥‡∏Å‡∏±‡∏î (Finite Set)</strong><br>
                    ‚Ä¢ ‡πÄ‡∏ã‡∏ï‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏à‡∏≥‡∏Å‡∏±‡∏î<br>
                    ‚Ä¢ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: A = {1, 2, 3, 4, 5}<br>
                    ‚Ä¢ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å |A| = 5
                </div>

                <div class="example-box">
                    <strong>3. ‡πÄ‡∏ã‡∏ï‡∏≠‡∏ô‡∏±‡∏ô‡∏ï‡πå (Infinite Set)</strong><br>
                    ‚Ä¢ ‡πÄ‡∏ã‡∏ï‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î<br>
                    ‚Ä¢ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‚Ñï = {1, 2, 3, 4, ...}<br>
                    ‚Ä¢ ‡πÄ‡∏ã‡∏ï‡∏Ç‡∏≠‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥
                </div>

                <div class="example-box">
                    <strong>4. ‡πÄ‡∏ã‡∏ï‡πÄ‡∏≠‡∏Å‡∏†‡∏û (Universal Set)</strong><br>
                    ‚Ä¢ ‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå: U<br>
                    ‚Ä¢ ‡πÄ‡∏ã‡∏ï‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏™‡∏ô‡πÉ‡∏à<br>
                    ‚Ä¢ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: U = {‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á}
                </div>
            </div>
        </div>

        <div class="game-container">
            <h2 class="game-title">üéÆ ‡πÄ‡∏Å‡∏°‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏û‡∏•‡∏¥‡∏Å: ‡∏ó‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏ã‡∏ï</h2>
            <p style="text-align: center; color: #666; margin-bottom: 2rem;">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏•‡∏¥‡∏Å‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</p>
            
            <div class="score-display">
                ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <span id="gameScore">0</span> / <span id="totalCards">6</span>
            </div>

            <div class="cards-container">
                <div class="flip-card" data-index="0">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <div class="card-icon">ü§î</div>
                            <div class="card-question">A = { }<br><br>‡πÄ‡∏ã‡∏ï‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÉ‡∏î?</div>
                            <div class="card-choices-grid">
                                <button tabindex="0" onclick="chooseCornerAnswer(event,0,0)">‡πÄ‡∏ã‡∏ï‡∏ß‡πà‡∏≤‡∏á</button>
                                <button tabindex="0" onclick="chooseCornerAnswer(event,0,1)">‡πÄ‡∏ã‡∏ï‡∏à‡∏≥‡∏Å‡∏±‡∏î</button>
                                <button tabindex="0" onclick="chooseCornerAnswer(event,0,2)">‡πÄ‡∏ã‡∏ï‡∏≠‡∏ô‡∏±‡∏ô‡∏ï‡πå</button>
                                <button tabindex="0" onclick="chooseCornerAnswer(event,0,3)">‡πÄ‡∏ã‡∏ï‡πÄ‡∏≠‡∏Å‡∏†‡∏û</button>
                            </div>
                        </div>
                        <div class="flip-card-back">
                            <div class="card-icon">‚úÖ</div>
                            <div class="card-answer">‡πÄ‡∏ã‡∏ï‡∏ß‡πà‡∏≤‡∏á (Empty Set)<br><br>‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÄ‡∏•‡∏¢<br>‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå: ‚àÖ</div>
                        </div>
                    </div>
                </div>
                <div class="flip-card" data-index="1">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <div class="card-icon">üßÆ</div>
                            <div class="card-question">B = {1, 2, 3, 4, 5}<br><br>‡πÄ‡∏ã‡∏ï‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÉ‡∏î?</div>
                            <div class="card-choices-grid">
                                <button tabindex="0" onclick="chooseCornerAnswer(event,1,0)">‡πÄ‡∏ã‡∏ï‡∏ß‡πà‡∏≤‡∏á</button>
                                <button tabindex="0" onclick="chooseCornerAnswer(event,1,1)">‡πÄ‡∏ã‡∏ï‡∏à‡∏≥‡∏Å‡∏±‡∏î</button>
                                <button tabindex="0" onclick="chooseCornerAnswer(event,1,2)">‡πÄ‡∏ã‡∏ï‡∏≠‡∏ô‡∏±‡∏ô‡∏ï‡πå</button>
                                <button tabindex="0" onclick="chooseCornerAnswer(event,1,3)">‡πÄ‡∏ã‡∏ï‡πÄ‡∏≠‡∏Å‡∏†‡∏û</button>
                            </div>
                        </div>
                        <div class="flip-card-back">
                            <div class="card-icon">‚úÖ</div>
                            <div class="card-answer">‡πÄ‡∏ã‡∏ï‡∏à‡∏≥‡∏Å‡∏±‡∏î (Finite Set)<br><br>‡∏°‡∏µ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å 5 ‡∏ï‡∏±‡∏ß<br>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏à‡∏≥‡∏Å‡∏±‡∏î</div>
                        </div>
                    </div>
                </div>
                <div class="flip-card" data-index="2">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <div class="card-icon">‚àû</div>
                            <div class="card-question">C = {1, 2, 3, 4, ...}<br><br>‡πÄ‡∏ã‡∏ï‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÉ‡∏î?</div>
                            <div class="card-choices-grid">
                                <button tabindex="0" onclick="chooseCornerAnswer(event,2,0)">‡πÄ‡∏ã‡∏ï‡∏ß‡πà‡∏≤‡∏á</button>
                                <button tabindex="0" onclick="chooseCornerAnswer(event,2,1)">‡πÄ‡∏ã‡∏ï‡∏à‡∏≥‡∏Å‡∏±‡∏î</button>
                                <button tabindex="0" onclick="chooseCornerAnswer(event,2,2)">‡πÄ‡∏ã‡∏ï‡∏≠‡∏ô‡∏±‡∏ô‡∏ï‡πå</button>
                                <button tabindex="0" onclick="chooseCornerAnswer(event,2,3)">‡πÄ‡∏ã‡∏ï‡πÄ‡∏≠‡∏Å‡∏†‡∏û</button>
                            </div>
                        </div>
                        <div class="flip-card-back">
                            <div class="card-icon">‚úÖ</div>
                            <div class="card-answer">‡πÄ‡∏ã‡∏ï‡∏≠‡∏ô‡∏±‡∏ô‡∏ï‡πå (Infinite Set)<br><br>‡∏°‡∏µ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î<br>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥</div>
                        </div>
                    </div>
                </div>
                <div class="flip-card" data-index="3">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <div class="card-icon">üåç</div>
                            <div class="card-question">D = {‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô}<br><br>‡πÄ‡∏ã‡∏ï‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÉ‡∏î?</div>
                            <div class="card-choices-grid">
                                <button tabindex="0" onclick="chooseCornerAnswer(event,3,0)">‡πÄ‡∏ã‡∏ï‡∏ß‡πà‡∏≤‡∏á</button>
                                <button tabindex="0" onclick="chooseCornerAnswer(event,3,1)">‡πÄ‡∏ã‡∏ï‡∏à‡∏≥‡∏Å‡∏±‡∏î</button>
                                <button tabindex="0" onclick="chooseCornerAnswer(event,3,2)">‡πÄ‡∏ã‡∏ï‡∏≠‡∏ô‡∏±‡∏ô‡∏ï‡πå</button>
                                <button tabindex="0" onclick="chooseCornerAnswer(event,3,3)">‡πÄ‡∏ã‡∏ï‡πÄ‡∏≠‡∏Å‡∏†‡∏û</button>
                            </div>
                        </div>
                        <div class="flip-card-back">
                            <div class="card-icon">‚úÖ</div>
                            <div class="card-answer">‡πÄ‡∏ã‡∏ï‡πÄ‡∏≠‡∏Å‡∏†‡∏û (Universal Set)<br><br>‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î<br>‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏™‡∏ô‡πÉ‡∏à</div>
                        </div>
                    </div>
                </div>
                <div class="flip-card" data-index="4">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <div class="card-icon">ü¶Ñ</div>
                            <div class="card-question">E = {‡∏¢‡∏π‡∏ô‡∏¥‡∏Ñ‡∏≠‡∏£‡πå‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏£‡∏¥‡∏á}<br><br>‡πÄ‡∏ã‡∏ï‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÉ‡∏î?</div>
                            <div class="card-choices-grid">
                                <button tabindex="0" onclick="chooseCornerAnswer(event,4,0)">‡πÄ‡∏ã‡∏ï‡∏ß‡πà‡∏≤‡∏á</button>
                                <button tabindex="0" onclick="chooseCornerAnswer(event,4,1)">‡πÄ‡∏ã‡∏ï‡∏à‡∏≥‡∏Å‡∏±‡∏î</button>
                                <button tabindex="0" onclick="chooseCornerAnswer(event,4,2)">‡πÄ‡∏ã‡∏ï‡∏≠‡∏ô‡∏±‡∏ô‡∏ï‡πå</button>
                                <button tabindex="0" onclick="chooseCornerAnswer(event,4,3)">‡πÄ‡∏ã‡∏ï‡πÄ‡∏≠‡∏Å‡∏†‡∏û</button>
                            </div>
                        </div>
                        <div class="flip-card-back">
                            <div class="card-icon">‚úÖ</div>
                            <div class="card-answer">‡πÄ‡∏ã‡∏ï‡∏ß‡πà‡∏≤‡∏á (Empty Set)<br><br>‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏¢‡∏π‡∏ô‡∏¥‡∏Ñ‡∏≠‡∏£‡πå‡∏ô<br>‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏£‡∏¥‡∏á</div>
                        </div>
                    </div>
                </div>
                <div class="flip-card" data-index="5">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <div class="card-icon">üî¢</div>
                            <div class="card-question">F = {‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ï‡πá‡∏°‡∏•‡∏ö}<br><br>‡πÄ‡∏ã‡∏ï‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÉ‡∏î?</div>
                            <div class="card-choices-grid">
                                <button tabindex="0" onclick="chooseCornerAnswer(event,5,0)">‡πÄ‡∏ã‡∏ï‡∏ß‡πà‡∏≤‡∏á</button>
                                <button tabindex="0" onclick="chooseCornerAnswer(event,5,1)">‡πÄ‡∏ã‡∏ï‡∏à‡∏≥‡∏Å‡∏±‡∏î</button>
                                <button tabindex="0" onclick="chooseCornerAnswer(event,5,2)">‡πÄ‡∏ã‡∏ï‡∏≠‡∏ô‡∏±‡∏ô‡∏ï‡πå</button>
                                <button tabindex="0" onclick="chooseCornerAnswer(event,5,3)">‡πÄ‡∏ã‡∏ï‡πÄ‡∏≠‡∏Å‡∏†‡∏û</button>
                            </div>
                        </div>
                        <div class="flip-card-back">
                            <div class="card-icon">‚úÖ</div>
                            <div class="card-answer">‡πÄ‡∏ã‡∏ï‡∏≠‡∏ô‡∏±‡∏ô‡∏ï‡πå (Infinite Set)<br><br>‡∏°‡∏µ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ï‡πá‡∏°‡∏•‡∏ö<br>‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="result-message" id="resultMessage"></div>

            <div class="buttons">
                <button class="btn btn-primary" onclick="finishLesson()">üéâ ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</button>
                <button class="btn btn-secondary" onclick="resetGame()">üîÑ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
                <button class="btn btn-secondary" onclick="goHome()">üè† ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π</button>
            </div>
        </div>
    </div>

    <script>
        // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡∏°
        let gameData = {
            currentXP: 0,
            stars: 0,
            flippedCards: [],
            gameScore: 0,
            totalCards: 6
        };

        // ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πå‡∏î (index ‡∏Ç‡∏≠‡∏á‡∏õ‡∏∏‡πà‡∏°)
const correctAnswers = [0, 1, 2, 3, 0, 2];
let answeredCards = [false, false, false, false, false, false];
let totalAnswered = 0;
let xpGranted = false;

function chooseCornerAnswer(e, cardIdx, choiceIdx) {
    e.stopPropagation();
    const card = document.querySelector(`.flip-card[data-index="${cardIdx}"]`);
    if (answeredCards[cardIdx] || card.classList.contains('flipped')) return;

    if (choiceIdx === correctAnswers[cardIdx]) {
        // Correct
        answeredCards[cardIdx] = true;
        totalAnswered++;
        card.classList.remove('incorrect');
        card.classList.add('flipped');
        playSound('success');
        setTimeout(() => {
            card.classList.add('correct');
            setTimeout(() => card.classList.remove('correct'), 600);
        }, 300);
        updateScore();
        checkAllAnswered();
    } else {
        // Incorrect
        card.classList.remove('incorrect');
        void card.offsetWidth;
        card.classList.add('incorrect');
        playSound('click');
    }
}

function updateScore() {
    document.getElementById('gameScore').textContent = totalAnswered;
}

function resetGame() {
    answeredCards = [false, false, false, false, false, false];
    totalAnswered = 0;
    xpGranted = false;
    // Reset all cards
    const cards = document.querySelectorAll('.flip-card');
    cards.forEach(card => {
        card.classList.remove('flipped', 'correct', 'incorrect');
    });
    // Hide result
    document.getElementById('resultMessage').style.display = 'none';
    updateScore();
    playSound('click');
}

// ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏Å‡∏°
        function initGame() {
            loadProgress();
            updateUI();
        }

        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
        function finishLesson() {
            if (totalAnswered === correctAnswers.length && !xpGranted) {
                // Add XP and sync with index/home
                if (window.opener && window.opener.setTheoryUtils) {
                    window.opener.setTheoryUtils.addXP(100);
                    window.opener.setTheoryUtils.completeLessonFromChild(2);
                } else if (window.setTheoryUtils) {
                    window.setTheoryUtils.addXP(100);
                    window.setTheoryUtils.completeLessonFromChild(2);
                } else {
                    let xp = parseInt(localStorage.getItem('setTheoryXP') || '0', 10);
                    xp += 100;
                    localStorage.setItem('setTheoryXP', xp);
                    localStorage.setItem('lesson2_completed', 'true');
                }
                xpGranted = true;
                document.getElementById('resultMessage').textContent = 'üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà 2 ‡πÅ‡∏•‡πâ‡∏ß\n‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö 100 XP!';
                document.getElementById('resultMessage').className = 'result-message success';
                document.getElementById('resultMessage').style.display = 'block';
                showConfetti();
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 1200);
            } else if (totalAnswered !== correctAnswers.length) {
                document.getElementById('resultMessage').textContent = '‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ç‡πâ‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏ö‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô';
                document.getElementById('resultMessage').className = 'result-message error';
                document.getElementById('resultMessage').style.display = 'block';
                playSound('click');
            }
        }

        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï UI
        function updateUI() {
            document.getElementById('currentXP').textContent = gameData.currentXP;
            document.getElementById('currentStars').textContent = gameData.stars;
            document.getElementById('progressFill').style.width = '25%'; // 2/8 lessons
        }

        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤
        function loadProgress() {
            const saved = localStorage.getItem('setTheoryProgress');
            if (saved) {
                const savedData = JSON.parse(saved);
                gameData.currentXP = savedData.totalXP || 0;
                gameData.stars = savedData.totalStars || 0;
            }
        }

        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤
function saveProgress() {
    const saved = localStorage.getItem('setTheoryProgress');
    let progressData = saved ? JSON.parse(saved) : {
        totalXP: 0,
        completedLessons: 0,
        totalStars: 0,
        lessonProgress: {}
    };
    progressData.totalXP = gameData.currentXP;
    progressData.totalStars = gameData.stars;
    progressData.lessonProgress[2] = {
        completed: true,
        xp: 100,
        stars: 3
    };
    // ‡∏ô‡∏±‡∏ö‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏£‡πá‡∏à
    progressData.completedLessons = Object.keys(progressData.lessonProgress).length;
    localStorage.setItem('setTheoryProgress', JSON.stringify(progressData));
}

// ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á
        function playSound(type) {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            switch(type) {
                case 'flip':
                    oscillator.frequency.value = 600;
                    oscillator.type = 'sine';
                    gainNode.gain.value = 0.2;
                    oscillator.start();
                    oscillator.stop(audioContext.currentTime + 0.1);
                    break;
                    
                case 'success':
                    // ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
                    oscillator.frequency.value = 523.25; // C5
                    oscillator.type = 'sine';
                    gainNode.gain.value = 0.3;
                    oscillator.start();
                    oscillator.stop(audioContext.currentTime + 0.2);
                    
                    setTimeout(() => {
                        const osc2 = audioContext.createOscillator();
                        const gain2 = audioContext.createGain();
                        osc2.connect(gain2);
                        gain2.connect(audioContext.destination);
                        osc2.frequency.value = 659.25; // E5
                        osc2.type = 'sine';
                        gain2.gain.value = 0.3;
                        osc2.start();
                        osc2.stop(audioContext.currentTime + 0.2);
                    }, 100);
                    break;
                    
                case 'click':
                    oscillator.frequency.value = 800;
                    oscillator.type = 'sine';
                    gainNode.gain.value = 0.3;
                    oscillator.start();
                    oscillator.stop(audioContext.currentTime + 0.1);
                    break;
            }
        }

        // ‡πÅ‡∏™‡∏î‡∏á confetti
        function showConfetti() {
            const colors = ['#667eea', '#764ba2', '#4CAF50', '#ff6b6b', '#ffd93d'];
            
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 2 + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 3000);
                }, i * 50);
            }
        }

        // ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
        function goHome() {
            playSound('click');
            window.location.href = 'index.html';
        }

        // XP SYSTEM: Sync with localStorage and update live
function getXP() {
    return parseInt(localStorage.getItem('setTheoryXP') || '0', 10);
}
function setXP(xp) {
    localStorage.setItem('setTheoryXP', xp);
    updateXPDisplay();
}
function addXP(amount) {
    let xp = getXP();
    xp += amount;
    setXP(xp);
}
function updateXPDisplay() {
    const xp = getXP();
    // For header XP display
    const el = document.getElementById('xp-display');
    if (el) el.textContent = `XP: ${xp}`;
    // For other XP displays (if any)
    const el2 = document.getElementById('currentXP');
    if (el2) el2.textContent = xp;
}
window.addEventListener('DOMContentLoaded', updateXPDisplay);

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
        window.addEventListener('load', initGame);
    </script>
</body>
</html>